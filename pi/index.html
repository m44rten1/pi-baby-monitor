<!DOCTYPE html>
<html lang="en">
  <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
  <script>
    const peer = new Peer("raspberry-pi-id");

    console.log("Peer: ", peer);

    peer.on("connection", (conn) => {
      conn.on("data", (data) => {
        if (data === "Test1234") {
          var getUserMedia =
            navigator.getUserMedia ||
            navigator.webkitGetUserMedia ||
            navigator.mozGetUserMedia;

          getUserMedia(
            { video: true, audio: true },
            (stream) => {
              const call = peer.call(conn.peer, stream);
            },
            function (err) {
              console.log("Failed to get local stream", err);
              conn.send("permission-failure");
            }
          );
        } else {
          conn.send("wrong");
        }
      });
    });
  </script>
</html>
